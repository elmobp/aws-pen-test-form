package com.gu.pentest

object Output {
  def detailsAsString(details: Map[String, List[PenTestInstance]]): String = {
    val instanceIps = details.values.flatten.map(_.ip).mkString("\n")
    val instanceIds = details.values.flatten.map(_.id).mkString("\n")

    val comments = details.map { case (asGroup, instances) =>
      val asInstances = instances.map(i => s"${i.id}\t${i.ip} (${i.instanceType})").mkString("\n")
      s"$asGroup\n$asInstances"
    } mkString "\n\n"

    s"""Instance IDs:
       |$instanceIds
       |
       |Instance IPs:
       |$instanceIps
       |
       |Comments:
       |Here are full details of the AS groups and current instances. The actual instances will change during routine scaling and deployments.
       |
       |$comments
     """.stripMargin
  }
}
